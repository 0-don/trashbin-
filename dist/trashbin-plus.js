(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(t=>setTimeout(t,10));var D,n,_,o,r,j,s,U,a,l,t,e,i,c,d,u,h,p,f,B,m,F,g,H,b,W,v,y,K,V,q,J,w,G,$,S,x,Q,Y,X,E,k,Z,tt,et,it,rt,T,O,I,at,nt,ot,C,st,A,R,lt,ct,dt,ut,ht,pt,ft,mt,gt,bt,vt,yt,wt,St,N,xt,Et,kt,Tt,Ot;function It(t,e,i){var r;if(!t||!t.uri)return 1;if(e[t.uri])return 1;var a,n,o=new Set;for(a of t.artists||[])a&&a.uri&&o.add(a.uri);null!=(e=t.metadata)&&e.artist_uri&&o.add(t.metadata.artist_uri);let s=1;for(;null!=(r=t.metadata)&&r["artist_uri:"+s];)o.add(t.metadata["artist_uri:"+s]),s++;for(n of o)if(i[n])return 1}async function Ct(){var t,e=w.getState(),i=Spicetify.Player.data;if(null!=(t=null==i?void 0:i.context)&&t.uri&&e.reshuffleOnSkip){var r,a=i.context.uri;for(r of i.nextItems||(null==(t=Spicetify.Queue)?void 0:t.nextTracks)||[])if(!It(r,e.trashSongList,e.trashArtistList))try{return void await Spicetify.Player.playUri(a,{},{skipTo:{uri:r.uri,uid:r.uid}})}catch(t){}}Spicetify.Player.next()}function At(i,t){var r,a,n=null==(r=Spicetify.Player.data)?void 0:r.item;if(n){if(t===Spicetify.URI.Type.TRACK)return i===n.uri;if(t===Spicetify.URI.Type.ARTIST){let t=0,e=null==(r=n.metadata)?void 0:r.artist_uri;for(;e;){if(i===e)return 1;t++,e=null==(a=n.metadata)?void 0:a["artist_uri:"+t]}}}}function M(t,e){var i;try{var r=Spicetify.LocalStorage.get(t);return r&&null!=(i=JSON.parse(r))?i:e}catch(t){return e}}function Rt(t,e){if(null==t)return{};var i,r=((t,e)=>{if(null==t)return{};var i,r={};for(i in t)!Object.prototype.hasOwnProperty.call(t,i)||0<=e.indexOf(i)||(r[i]=t[i]);return r})(t,e);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(t),n=0;n<a.length;n++)i=a[n],0<=e.indexOf(i)||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i]);return r}function Nt(){return(Nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i,r=arguments[e];for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function Mt(e,t){var i,r=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)),r}function z(r){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(a),!0).forEach(function(t){var e,i;e=r,i=a[t=t],(t=(t=>"symbol"==typeof(t=((t,e)=>{if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);if("object"!=typeof(i=i.call(t,e||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"))?t:t+"")(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Mt(Object(a)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(a,t))})}return r}function L(e){return t=>S.default.createElement(zt,Nt({attr:z({},e.attr)},t),function i(t){return t&&t.map((t,e)=>S.default.createElement(t.tag,z({key:e},t.attr),i(t.child)))}(e.child))}function zt(o){var e=t=>{var e,{attr:i,size:r,title:a}=o,n=Rt(o,X),r=r||t.size||"1em";return t.className&&(e=t.className),o.className&&(e=(e?e+" ":"")+o.className),S.default.createElement("svg",Nt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,n,{className:e,style:z(z({color:o.color||t.color},t.style),o.style),height:r,width:r,xmlns:"http://www.w3.org/2000/svg"}),a&&S.default.createElement("title",null,a),o.children)};return void 0!==Y?S.default.createElement(Y.Consumer,null,t=>e(t)):e(Q)}function Lt(t){return L({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9 13c0 1.105-1.12 2-2.5 2S4 14.105 4 13s1.12-2 2.5-2 2.5.895 2.5 2"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M9 3v10H8V3z"},child:[]},{tag:"path",attr:{d:"M8 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 13 2.22V4L8 5z"},child:[]}]})(t)}function Pt(t){return L({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"},child:[]}]})(t)}function Dt(t){return L({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"},child:[]}]})(t)}function _t(){let{handleTrashToggle:e,shouldAddContextMenu:i,getContextMenuLabel:r}=G(),a=(0,u.useRef)(null),n=t=>{var e=i(t);return e&&a.current&&(a.current.name=r(t[0])),e};return(0,u.useEffect)(()=>{let t=new Spicetify.ContextMenu.Item(h.THROW,e,n,E(15));return(a.current=t).register(),()=>t.deregister()},[e,n]),null}function jt(...t){return t.filter(Boolean).join(" ")}function Ut(){let[t,e]=(0,T.useState)(!1);return(0,T.useEffect)(()=>{let t=new Spicetify.Menu.Item(p.TRASHBIN,!1,()=>e(!0),E(15));return t.register(),()=>t.deregister()},[]),(0,T.useEffect)(()=>{if(t){Spicetify.PopupModal.display({title:p.SETTINGS,content:T.default.createElement(at,null)});let t=new MutationObserver(()=>{document.querySelector(".main-trackCreditsModal-container")||e(!1)});return t.observe(document.body,{childList:!0,subtree:!0}),()=>{t.disconnect()}}},[t]),null}function P(c,d,u){let h=u.initialDeps??[],p;function t(){let t,e,i,r,a;u.key&&null!=(t=u.debug)&&t.call(u)&&(a=Date.now());var n,o,s,l=c();if(l.length!==h.length||l.some((t,e)=>h[e]!==t)){h=l;let t;u.key&&null!=(e=u.debug)&&e.call(u)&&(t=Date.now()),p=d(...l),u.key&&null!=(i=u.debug)&&i.call(u)&&(l=Math.round(100*(Date.now()-a))/100,o=(n=Math.round(100*(Date.now()-t))/100)/16,s=(t,e)=>{for(t=String(t);t.length<e;)t=" "+t;return t},console.info(`%c⏱ ${s(n,5)} /${s(l,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*o,120))}deg 100% 31%);`,null==u?void 0:u.key)),null!=(r=null==u?void 0:u.onChange)&&r.call(u,p)}return p}return t.updateDeps=t=>{h=t},t}function Bt(t,e){if(void 0===t)throw new Error("Unexpected undefined"+(e?": "+e:""));return t}function Ft(i){{var a={observeElementRect:pt,observeElementOffset:gt,scrollToFn:vt,...i};let r=R.useReducer(()=>({}),{})[1],t={...a,onChange:(t,e)=>{var i;e?(0,lt.flushSync)(r):r(),null!=(i=a.onChange)&&i.call(a,t,e)}},[e]=R.useState(()=>new yt(t));return e.setOptions(t),St(()=>e._didMount(),[]),St(()=>e._willUpdate()),e}}function Ht(t){return L({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(t)}async function Wt(t,e=0,i=50){var r=t.slice(e,e+i).map(t=>t.split(":")[2]),a=[];for(let t=0;t<r.length;t+=50){var n=await(async i=>{try{return(await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/tracks?ids="+i.join(","))).tracks.map((t,e)=>({uri:"spotify:track:"+i[e],name:(null==t?void 0:t.name)||"Unknown Track",artist:(null==(e=null==t?void 0:t.artists)?void 0:e.map(t=>t.name).join(", "))||"Unknown Artist",imageUrl:null==(e=null==(t=null==(e=null==t?void 0:t.album)?void 0:e.images)?void 0:t[0])?void 0:e.url}))}catch(t){return console.error("Failed to fetch tracks:",t),i.map(t=>({uri:"spotify:track:"+t,name:"Error loading track",artist:"Failed to load"}))}})(r.slice(t,t+50));a.push(...n)}return a}async function Kt(t,e=0,i=50){var r=t.slice(e,e+i).map(t=>t.split(":")[2]),a=[];for(let t=0;t<r.length;t+=50){var n=await(async i=>{try{return(await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/artists?ids="+i.join(","))).artists.map((t,e)=>({uri:"spotify:artist:"+i[e],name:(null==t?void 0:t.name)||"Unknown Artist",type:"artist",imageUrl:null==(t=null==(e=null==t?void 0:t.images)?void 0:e[0])?void 0:t.url,secondaryText:"Artist"}))}catch(t){return console.error("Failed to fetch artists batch:",t),i.map(t=>({uri:"spotify:artist:"+t,name:"Error loading artist",type:"artist",secondaryText:"Failed to load"}))}})(r.slice(t,t+50));a.push(...n)}return a}function Vt(){let[t,e]=(0,A.useState)(!1);return(0,A.useEffect)(()=>{let t=new Spicetify.Menu.Item(p.TRASHBIN_ITEMS,!1,()=>e(!0),Spicetify.ReactDOMServer.renderToString(A.default.createElement(Dt,{size:15})));return t.register(),()=>t.deregister()},[]),(0,A.useEffect)(()=>{if(t){Spicetify.PopupModal.display({title:p.TRASHBIN_ITEMS,content:A.default.createElement(Tt,null),isLarge:!0});let t=new MutationObserver(()=>{document.querySelector(".main-trackCreditsModal-container")||e(!1)});return t.observe(document.body,{childList:!0,subtree:!0}),()=>{t.disconnect()}}},[t]),null}function qt(){let a=w();return(0,c.useEffect)(()=>{a.initializeFromStorage()},[a.initializeFromStorage]),(0,c.useEffect)(()=>{a.autoplayOnStart&&!Spicetify.Player.isPlaying()&&Spicetify.Player.play()},[a.autoplayOnStart]),(0,c.useEffect)(()=>{var r;if(a.trashbinEnabled){let t=null!=(r=document.querySelector(".main-skipBackButton-button"))?r:document.querySelector(".player-controls__left > button[data-encore-id='buttonTertiary']"),e=()=>a.setUserHitBack(!0),i=()=>{var t=null==(t=Spicetify.Player.data)?void 0:t.item,e=w.getState();e.userHitBack?a.setUserHitBack(!1):It(t,e.trashSongList,e.trashArtistList)&&Ct()};return null!=t&&t.addEventListener("click",e),Spicetify.Player.addEventListener("songchange",i),()=>{null!=t&&t.removeEventListener("click",e),Spicetify.Player.removeEventListener("songchange",i)}}},[a.trashbinEnabled,a.setUserHitBack,Ct]),c.default.createElement(c.default.Fragment,null,c.default.createElement(st,null),c.default.createElement(Ut,null),c.default.createElement(Vt,null),c.default.createElement(_t,null),c.default.createElement(ot,null),c.default.createElement(rt,null))}D=Object.create,n=Object.defineProperty,_=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,j=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,a=(t,e,i)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,l=(t,e)=>{for(var i in e=e||{})s.call(e,i)&&a(t,i,e[i]);if(r)for(var i of r(e))U.call(e,i)&&a(t,i,e[i]);return t},e=(t,e,i)=>(i=null!=t?D(j(t)):{},((e,i,r,a)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let t of o(i))s.call(e,t)||t===r||n(e,t,{get:()=>i[t],enumerable:!(a=_(i,t))||a.enumerable});return e})(!e&&t&&t.__esModule?i:n(i,"default",{value:t,enumerable:!0}),t)),i=(t=(t,e)=>function(){return e||(0,t[o(t)[0]])((e={exports:{}}).exports,e),e.exports})({"external-global-plugin:react"(t,e){e.exports=Spicetify.React}}),t=t({"external-global-plugin:react-dom"(t,e){e.exports=Spicetify.ReactDOM}}),c=e(i()),d=e(t()),u=e(i()),h={THROW:"Place in Trashbin",UNTHROW:"Remove from Trashbin",COPIED:"Copied to clipboard",BACKUP_SAVED_SUCCESS:"Backup saved successfully.",BACKUP_SAVED_FAILED:"Failed to save backup, try copying trashbin contents to clipboard and creating a backup manually.",BACKUP_RESTORED_SUCCESS:"Backup restored successfully.",BACKUP_RESTORED_FAILED:"Failed to restore backup, try importing trashbin contents from a file manually.",BACKUP_RESTORED_FAILED_FILE_READ:"Failed to read file, please ensure it is a valid JSON file.",TRASHBIN_CLEARED:"Trashbin cleared successfully!",SONG_REMOVED:"Song removed from trashbin",SONG_ADDED:"Song added to trashbin",ARTIST_REMOVED:"Artist removed from trashbin",ARTIST_ADDED:"Artist added to trashbin"},p={TRASHBIN:"Trashbin+",TRASHBIN_ITEMS:"Trashbin+ Items",SETTINGS:"Trashbin+ Settings",SUGGESTED_NAME:"spicetify-trashbin.json",ENABLED:"Enabled",SHOW_WIDGET_ICON:"Show Widget Icon",AUTOPLAY_ON_START:"Autoplay on Start",QUEUE_TRASHBIN:"Enable Queue Trashbin",TRACKLIST_TRASHBIN:"Enable Tracklist Trashbin",RESHUFFLE_ON_SKIP:"Skip to Next Non-Trashed & Reshuffle Queue",OPTIONS:"Options",FEATURES:"Features",LOCAL_STORAGE:"Local Storage",COPY:"Copy",EXPORT:"Export",IMPORT:"Import",CLEAR:"Clear",COPY_DESCRIPTION:"Copy all items in trashbin to clipboard.",EXPORT_DESCRIPTION:"Save all items in trashbin to a .json file.",IMPORT_DESCRIPTION:"Overwrite all items in trashbin via .json file.",CLEAR_DESCRIPTION:"Clear all items from trashbin (cannot be reverted)."},f=t=>{let r,a=new Set;var e=(t,i)=>{t="function"==typeof t?t(r):t;if(!Object.is(t,r)){let e=r;r=(null!=i?i:"object"!=typeof t||null===t)?t:Object.assign({},r,t),a.forEach(t=>t(r,e))}},i=()=>r,n={setState:e,getState:i,getInitialState:()=>o,subscribe:t=>(a.add(t),()=>a.delete(t))};let o=r=t(e,i,n);return n},B=t=>t?f(t):f,m=e(i(),1),F=t=>t,g=t=>{let r=B(t);t=t=>{return[e,i=F]=[r,t],t=m.default.useSyncExternalStore(e.subscribe,()=>i(e.getState()),()=>i(e.getInitialState())),m.default.useDebugValue(t),t;var e,i};return Object.assign(t,r),t},H=/spotify:track:([a-zA-Z0-9]+)/,b="trashbin-enabled",W="TrashbinWidgetIcon",v="TrashSongList",y="TrashArtistList",K="trashbin-autoplay-on-start",V="trashbin-queue-enabled",q="trashbin-tracklist-enabled",J="trashbin-reshuffle-on-skip",w=(x=(n,o)=>({trashbinEnabled:!0,widgetEnabled:!0,autoplayOnStart:!1,queueTrashbinEnabled:!0,tracklistTrashbinEnabled:!0,reshuffleOnSkip:!1,trashSongList:{},trashArtistList:{},userHitBack:!1,initializeFromStorage:()=>{n({trashbinEnabled:M(b,!0),widgetEnabled:M(W,!0),trashSongList:M(v,{}),trashArtistList:M(y,{}),autoplayOnStart:M(K,!1),queueTrashbinEnabled:M(V,!0),tracklistTrashbinEnabled:M(q,!0),reshuffleOnSkip:M(J,!1)})},setTrashbinEnabled:t=>{n({trashbinEnabled:t}),Spicetify.LocalStorage.set(b,JSON.stringify(t))},setWidgetEnabled:t=>{n({widgetEnabled:t}),Spicetify.LocalStorage.set(W,JSON.stringify(t))},setAutoplayOnStart:t=>{n({autoplayOnStart:t}),Spicetify.LocalStorage.set(K,JSON.stringify(t))},setQueueTrashbinEnabled:t=>{n({queueTrashbinEnabled:t}),Spicetify.LocalStorage.set(V,JSON.stringify(t))},setTracklistTrashbinEnabled:t=>{n({tracklistTrashbinEnabled:t}),Spicetify.LocalStorage.set(q,JSON.stringify(t))},setReshuffleOnSkip:t=>{n({reshuffleOnSkip:t}),Spicetify.LocalStorage.set(J,JSON.stringify(t))},setUserHitBack:t=>n({userHitBack:t}),toggleSongTrash:(t,e=!0)=>{var i=o(),r=!!i.trashSongList[t],a=l({},i.trashSongList);r?(delete a[t],e&&Spicetify.showNotification(h.SONG_REMOVED)):(a[t]=!0,e&&Spicetify.showNotification(h.SONG_ADDED),e=null==(r=Spicetify.Player.data)?void 0:r.item,i.trashbinEnabled&&e&&At(t,Spicetify.URI.Type.TRACK)&&Spicetify.Player.next()),n({trashSongList:a}),Spicetify.LocalStorage.set(v,JSON.stringify(a))},toggleArtistTrash:(t,e=!0)=>{var i=o(),r=!!i.trashArtistList[t],a=l({},i.trashArtistList);r?(delete a[t],e&&Spicetify.showNotification(h.ARTIST_REMOVED)):(a[t]=!0,e&&Spicetify.showNotification(h.ARTIST_ADDED),e=null==(r=Spicetify.Player.data)?void 0:r.item,i.trashbinEnabled&&e&&At(t,Spicetify.URI.Type.ARTIST)&&Spicetify.Player.next()),n({trashArtistList:a}),Spicetify.LocalStorage.set(y,JSON.stringify(a))},getTrashStatus:t=>{var e=o(),i=Spicetify.URI.fromString(t);return{isTrashed:i.type===Spicetify.URI.Type.TRACK?!!e.trashSongList[t]:!!e.trashArtistList[t],type:i.type}},importTrashData:(t,e)=>{n({trashSongList:t,trashArtistList:e}),Spicetify.LocalStorage.set(v,JSON.stringify(t)),Spicetify.LocalStorage.set(y,JSON.stringify(e))},clearTrashbin:()=>{var t={};n({trashSongList:t,trashArtistList:t}),Spicetify.LocalStorage.set(v,JSON.stringify(t)),Spicetify.LocalStorage.set(y,JSON.stringify(t))},exportData:()=>{var t=o();return{songs:t.trashSongList,artists:t.trashArtistList}}}))?g(x):g,G=()=>{let i=w();return{handleTrashToggle:t=>{var t=t[0],e=Spicetify.URI.fromString(t);e.type===Spicetify.URI.Type.TRACK?i.toggleSongTrash(t):e.type===Spicetify.URI.Type.ARTIST&&i.toggleArtistTrash(t)},shouldAddContextMenu:t=>!(1<t.length||!i.trashbinEnabled)&&(t=i.getTrashStatus(t[0]).type,t===Spicetify.URI.Type.TRACK||t===Spicetify.URI.Type.ARTIST),getContextMenuLabel:t=>{t=i.getTrashStatus(t).isTrashed;return t?h.UNTHROW:h.THROW}}},$=e(i()),S=e(i(),1),x=e(i(),1),Q={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Y=x.default.createContext&&x.default.createContext(Q),X=["attr","size","title"],E=(t,e)=>Spicetify.ReactDOMServer.renderToString($.default.createElement(Dt,{className:e,size:t})),k=e(i()),Z=e(i()),tt=(e,i,t={})=>{let{enabled:r=!0}=t;(0,Z.useEffect)(()=>{if(r){let t=new MutationObserver(t=>{i(t)&&e()});return t.observe(document.body,{childList:!0,subtree:!0}),()=>t.disconnect()}},[r,e,i])},et=(a,e=!0)=>{let n=w(),i=(0,k.useCallback)(()=>{document.querySelectorAll(a.buttonSelector).forEach(t=>t.remove())},[a.buttonSelector]),t=(0,k.useCallback)(()=>{var t;i(),e&&n.trashbinEnabled&&(t=document.querySelector(a.containerSelector))&&t.querySelectorAll(a.moreButtonSelector).forEach(t=>{var r=t.closest(a.rowSelector);if(r){let i=(t=>{let e,i,r=null;var a=t,n=Object.keys(a).find(t=>t.includes("react"));if(n){let t=a[n];for(;t&&!r;)try{var o=null!=(i=null!=(e=t.memoizedProps)?e:t.props)?i:{},s=JSON.stringify(o).match(H);null!=s&&s[0]&&(r=s[0]),t=t.return}catch(t){break}}return a=Array.from(t.querySelectorAll('a[href*="/artist/"]')).map(t=>null==(t=t.href.match(/\/artist\/([a-zA-Z0-9]+)/))?void 0:t[1]).filter(t=>Boolean(t)).map(t=>"spotify:artist:"+t),{trackURI:r,artistURIs:a}})(r).trackURI;if(i&&!r.querySelector(a.buttonSelector)){var r=!!n.trashSongList[i];let e=document.createElement("button");e.className=a.buttonClassName+" bg-transparent border-none p-2 opacity-70 cursor-pointer hover:opacity-100 transition-opacity",e.innerHTML=E(16,r?"text-green-500":""),e.dataset.visuallyTrashed=r.toString(),e.onclick=t=>{t.stopPropagation();t="true"!==e.dataset.visuallyTrashed;e.innerHTML=E(16,t?"text-green-500":""),e.dataset.visuallyTrashed=t.toString(),n.toggleSongTrash(i)},null!=(r=t.parentElement)&&r.insertBefore(e,t)}}})},[a,n,e,i]);(0,k.useEffect)(()=>{(e&&n.trashbinEnabled?t:i)()},[e,n.trashbinEnabled,i,t]);tt(t,t=>t.some(t=>Array.from(t.addedNodes).some(t=>{var e;return t.nodeType===Node.ELEMENT_NODE&&((null==(e=(t=t).closest)?void 0:e.call(t,a.containerSelector))||(null==(e=t.querySelector)?void 0:e.call(t,a.containerSelector)))&&!(null!=(e=t.classList)&&e.contains(a.buttonClassName.split(" ")[0]))})),{enabled:n.trashbinEnabled&&e})},it={containerSelector:"#Desktop_PanelContainer_Id",buttonSelector:".trashbin-queue-btn",rowSelector:'[role="row"]',moreButtonSelector:'button[aria-haspopup="menu"]',buttonClassName:"trashbin-queue-btn"},rt=()=>{var t=w(t=>t.queueTrashbinEnabled);return et(it,t),null},T=e(i()),O=({label:t,enabled:e,onChange:i})=>T.default.createElement("div",{className:"flex items-center justify-between !gap-2.5 !py-2.5"},T.default.createElement("label",{className:"w-full pr-4"},t),T.default.createElement("div",{className:"text-right"},T.default.createElement("button",{className:jt("!flex !cursor-pointer !items-center !rounded-full !border-0","!ml-3 !p-2 !transition-colors","!bg-[rgba(var(--spice-rgb-shadow),0.7)] !text-[var(--spice-text)]",!e&&"!text-[rgba(var(--spice-rgb-text),0.3)]"),onClick:()=>i(!e)},T.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"currentColor"},T.default.createElement("path",{d:"M8.797 2.5a.5.5 0 0 0-.594 0L2.5 6.5v7a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-7l-5.703-4z"}))))),I=({label:t,description:e,onClick:i})=>T.default.createElement("div",{className:"flex items-center justify-between !gap-2.5 !py-2.5"},T.default.createElement("label",{className:"w-full pr-4"},e),T.default.createElement("div",{className:"text-right"},T.default.createElement("button",{className:jt("!rounded-full !bg-transparent !font-bold !transition-transform","!border !border-[#727272] !px-[15px] !duration-[33ms]","!min-h-8 !cursor-pointer !text-[var(--spice-text)]","hover:!scale-[1.04] hover:!border-[var(--spice-text)]"),onClick:i},t))),at=()=>{let r=w();return T.default.createElement("div",{className:"p-4"},T.default.createElement("h2",{className:"!my-2.5 text-lg font-bold text-[var(--spice-text)] first-of-type:mt-0"},p.OPTIONS),T.default.createElement(O,{label:p.ENABLED,enabled:r.trashbinEnabled,onChange:r.setTrashbinEnabled}),T.default.createElement(O,{label:p.SHOW_WIDGET_ICON,enabled:r.widgetEnabled,onChange:r.setWidgetEnabled}),T.default.createElement("h2",{className:"!my-2.5 text-lg font-bold text-[var(--spice-text)] first-of-type:mt-0"},p.FEATURES),T.default.createElement(O,{label:p.AUTOPLAY_ON_START,enabled:r.autoplayOnStart,onChange:r.setAutoplayOnStart}),T.default.createElement(O,{label:p.QUEUE_TRASHBIN,enabled:r.queueTrashbinEnabled,onChange:r.setQueueTrashbinEnabled}),T.default.createElement(O,{label:p.TRACKLIST_TRASHBIN,enabled:r.tracklistTrashbinEnabled,onChange:r.setTracklistTrashbinEnabled}),T.default.createElement(O,{label:p.RESHUFFLE_ON_SKIP,enabled:r.reshuffleOnSkip,onChange:r.setReshuffleOnSkip}),T.default.createElement("h2",{className:"!my-2.5 text-lg font-bold text-[var(--spice-text)] first-of-type:mt-0"},p.LOCAL_STORAGE),T.default.createElement(I,{label:p.COPY,description:p.COPY_DESCRIPTION,onClick:()=>{Spicetify.Platform.ClipboardAPI.copy(JSON.stringify(r.exportData())),Spicetify.showNotification(h.COPIED)}}),T.default.createElement(I,{label:p.EXPORT,description:p.EXPORT_DESCRIPTION,onClick:async()=>{var t;try{var e=await(null==(t=window.showSaveFilePicker)?void 0:t.call(window,{suggestedName:p.SUGGESTED_NAME,types:[{accept:{"application/json":[".json"]}}]})),i=await(null==e?void 0:e.createWritable());await(null==i?void 0:i.write(JSON.stringify(r.exportData()))),await(null==i?void 0:i.close()),Spicetify.showNotification(h.BACKUP_SAVED_SUCCESS)}catch(t){Spicetify.showNotification(h.BACKUP_SAVED_FAILED)}}}),T.default.createElement(I,{label:p.IMPORT,description:p.IMPORT_DESCRIPTION,onClick:()=>{var t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=t=>{var e,t=null==(t=t.target.files)?void 0:t[0];t&&((e=new FileReader).onload=t=>{var e;try{var i=JSON.parse(null==(e=t.target)?void 0:e.result);r.importTrashData(i.songs||{},i.artists||{}),Spicetify.showNotification(h.BACKUP_RESTORED_SUCCESS)}catch(t){Spicetify.showNotification(h.BACKUP_RESTORED_FAILED,!0)}},e.readAsText(t))},t.click()}}),T.default.createElement(I,{label:p.CLEAR,description:p.CLEAR_DESCRIPTION,onClick:()=>{r.clearTrashbin(),Spicetify.showNotification(h.TRASHBIN_CLEARED)}}))},nt={containerSelector:"main",buttonSelector:".trashbin-tracklist-btn",rowSelector:".main-trackList-trackListRow",moreButtonSelector:".main-trackList-rowMoreButton",buttonClassName:"trashbin-tracklist-btn"},ot=()=>{var t=w(t=>t.tracklistTrashbinEnabled);return et(nt,t),null},C=e(i()),st=C.default.memo(()=>{let r=w(),i=(0,C.useRef)(null),a=t=>{var e,i=null==(i=Spicetify.Player.data)?void 0:i.item;i&&(e=Spicetify.URI.fromString(i.uri).type===Spicetify.URI.Type.TRACK,i=!!r.trashSongList[i.uri],e?(t.active=i,t.label=i?h.UNTHROW:h.THROW):t.deregister())};return(0,C.useEffect)(()=>{let t=new Spicetify.Playbar.Widget(h.THROW,E(18),()=>{var t=null==(t=Spicetify.Player.data)?void 0:t.item;t&&r.toggleSongTrash(t.uri)},!1,!1,r.widgetEnabled&&r.trashbinEnabled),e=(i.current=t,a(t),()=>a(t));return Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e),t.deregister()}},[r.trashbinEnabled,r.widgetEnabled,r.trashSongList]),null}),A=e(i()),R=e(i(),1),lt=e(t(),1),ct=(e,i,r)=>{let a;return function(...t){e.clearTimeout(a),a=e.setTimeout(()=>i.apply(this,t),r)}},dt=t=>{var{offsetWidth:t,offsetHeight:e}=t;return{width:t,height:e}},ut=t=>t,ht=t=>{var e=Math.max(t.startIndex-t.overscan,0),i=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let t=e;t<=i;t++)r.push(t);return r},pt=(r,a)=>{let n=r.scrollElement;if(n){var e=r.targetWindow;if(e){let i=t=>{var{width:t,height:e}=t;a({width:Math.round(t),height:Math.round(e)})};if(i(dt(n)),!e.ResizeObserver)return()=>{};let t=new e.ResizeObserver(e=>{var t=()=>{var t=e[0];if(null!=t&&t.borderBoxSize){t=t.borderBoxSize[0];if(t)return void i({width:t.inlineSize,height:t.blockSize})}i(dt(n))};r.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()});return t.observe(n,{box:"border-box"}),()=>{t.unobserve(n)}}}},ft={passive:!0},mt="undefined"==typeof window||"onscrollend"in window,gt=(n,o)=>{let s=n.scrollElement;if(s){var l=n.targetWindow;if(l){let r=0,a=n.options.useScrollendEvent&&mt?()=>{}:ct(l,()=>{o(r,!1)},n.options.isScrollingResetDelay);l=i=>()=>{var{horizontal:t,isRtl:e}=n.options;r=t?s.scrollLeft*(e?-1:1):s.scrollTop,a(),o(r,i)};let t=l(!0),e=l(!1),i=(e(),s.addEventListener("scroll",t,ft),n.options.useScrollendEvent&&mt);return i&&s.addEventListener("scrollend",e,ft),()=>{s.removeEventListener("scroll",t),i&&s.removeEventListener("scrollend",e)}}}},bt=(t,e,i)=>{if(null!=e&&e.borderBoxSize){e=e.borderBoxSize[0];if(e)return Math.round(e[i.options.horizontal?"inlineSize":"blockSize"])}return t[i.options.horizontal?"offsetWidth":"offsetHeight"]},vt=(t,{adjustments:e=0,behavior:i},r)=>{var a,n;null!=(n=null==(a=r.scrollElement)?void 0:a.scrollTo)&&n.call(a,{[r.options.horizontal?"left":"top"]:t+e,behavior:i})},yt=class{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null,i=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(t=>{t.forEach(t=>{var e=()=>{this._measureElement(t.target,t)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(e):e()})}):null);return{disconnect:()=>{var t;null!=(t=i())&&t.disconnect(),e=null},observe:t=>{var e;return null==(e=i())?void 0:e.observe(t,{box:"border-box"})},unobserve:t=>{var e;return null==(e=i())?void 0:e.unobserve(t)}}})(),this.range=null,this.setOptions=i=>{Object.entries(i).forEach(([t,e])=>{void 0===e&&delete i[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ut,rangeExtractor:ht,onChange:()=>{},measureElement:bt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...i}},this.notify=t=>{var e,i;null!=(i=(e=this.options).onChange)&&i.call(e,this,t)},this.maybeNotify=P(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t=this.options.enabled?this.options.getScrollElement():null;this.scrollElement!==t&&(this.cleanup(),t?(this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(t=this.scrollElement)?void 0:t.window)??null,this.elementsCache.forEach(t=>{this.observer.observe(t)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,t=>{this.scrollRect=t,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(t,e)=>{this.scrollAdjustments=0,this.scrollDirection=e?this.getScrollOffset()<t?"forward":"backward":null,this.scrollOffset=t,this.isScrolling=e,this.maybeNotify()}))):this.maybeNotify())},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,i)=>{var r=new Map,a=new Map;for(let t=i-1;0<=t;t--){var n=e[t];if(!r.has(n.lane)){var o=a.get(n.lane);if(null==o||n.end>o.end?a.set(n.lane,n):n.end<o.end&&r.set(n.lane,!0),r.size===this.options.lanes)break}}return a.size===this.options.lanes?Array.from(a.values()).sort((t,e)=>t.end===e.end?t.index-e.index:t.end-e.end)[0]:void 0},this.getMeasurementOptions=P(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,e,i,r,a)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:e,scrollMargin:i,getItemKey:r,enabled:a}),{key:!1}),this.getMeasurements=P(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:i,scrollMargin:r,getItemKey:a,enabled:n},o)=>{if(!n)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(t=>{this.itemSizeCache.set(t.key,t.size)}));var n=0<this.pendingMeasuredCacheIndexes.length?Math.min(...this.pendingMeasuredCacheIndexes):0,s=(this.pendingMeasuredCacheIndexes=[],this.measurementsCache.slice(0,n));for(let t=n;t<e;t++){var l=a(t),c=1===this.options.lanes?s[t-1]:this.getFurthestMeasurement(s,t),d=c?c.end+this.options.gap:i+r,u=o.get(l),u="number"==typeof u?u:this.options.estimateSize(t),c=c?c.lane:t%this.options.lanes;s[t]={index:t,start:d,size:u,end:d+u,key:l,lane:c}}return this.measurementsCache=s},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=P(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,e,i,r)=>this.range=0<t.length&&0<e?(({measurements:e,outerSize:i,scrollOffset:r,lanes:t})=>{var a=e.length-1,n=t=>e[t].start;if(e.length<=t)return{startIndex:0,endIndex:a};let o=wt(0,a,n,r),s=o;if(1===t)for(;s<a&&e[s].end<r+i;)s++;else if(1<t){for(var l=Array(t).fill(0);s<a&&l.some(t=>t<r+i);){var c=e[s];l[c.lane]=c.end,s++}for(var d=Array(t).fill(r+i);0<=o&&d.some(t=>r<=t);){var u=e[o];d[u.lane]=u.start,o--}o=Math.max(0,o-o%t),s=Math.min(a,s+(t-1-s%t))}return{startIndex:o,endIndex:s}})({measurements:t,outerSize:e,scrollOffset:i,lanes:r}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=P(()=>{let t=null,e=null;var i=this.calculateRange();return i&&(t=i.startIndex,e=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,e]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,e]},(t,e,i,r,a)=>null===r||null===a?[]:t({startIndex:r,endIndex:a,overscan:e,count:i}),{key:"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{var e=this.options.indexAttribute,t=t.getAttribute(e);return t?parseInt(t,10):(console.warn(`Missing attribute name '${e}={index}' on measured element.`),-1)},this._measureElement=(t,e)=>{var i,r=this.indexFromElement(t),a=this.measurementsCache[r];a&&(a=a.key,(i=this.elementsCache.get(a))!==t&&(i&&this.observer.unobserve(i),this.observer.observe(t),this.elementsCache.set(a,t)),t.isConnected)&&this.resizeItem(r,this.options.measureElement(t,e,this))},this.resizeItem=(t,e)=>{var i,t=this.measurementsCache[t];t&&0!=(i=e-(this.itemSizeCache.get(t.key)??t.size))&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(t,i,this):"backward"===this.scrollDirection&&t.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",i),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,e)),this.notify(!1))},this.measureElement=t=>{t?this._measureElement(t,void 0):this.elementsCache.forEach((t,e)=>{t.isConnected||(this.observer.unobserve(t),this.elementsCache.delete(e))})},this.getVirtualItems=P(()=>[this.getVirtualIndexes(),this.getMeasurements()],(i,r)=>{var a=[];for(let t=0,e=i.length;t<e;t++){var n=r[i[t]];a.push(n)}return a},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{let e=this.getMeasurements();if(0!==e.length)return Bt(e[wt(0,e.length-1,t=>Bt(e[t]).start,t)])},this.getOffsetForAlignment=(t,e,i=0)=>{var r=this.getSize(),a=this.getScrollOffset(),a=("center"===(e="auto"===e?a+r<=t?"end":"start":e)?t+=(i-r)/2:"end"===e&&(t-=r),this.getTotalSize()-r);return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,e="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));t=this.measurementsCache[t];if(t){var i=this.getSize(),r=this.getScrollOffset();if("auto"===e)if(t.end>=r+i-this.options.scrollPaddingEnd)e="end";else{if(!(t.start<=r+this.options.scrollPaddingStart))return[r,e];e="start"}i="end"===e?t.end+this.options.scrollPaddingEnd:t.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,e,t.size),e]}},this.isDynamicMode=()=>0<this.elementsCache.size,this.cancelScrollToIndex=()=>{null!==this.scrollToIndexTimeoutId&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:e="start",behavior:i}={})=>{this.cancelScrollToIndex(),"smooth"===i&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,e),{adjustments:void 0,behavior:i})},this.scrollToIndex=(r,{align:e="auto",behavior:a}={})=>{r=Math.max(0,Math.min(r,this.options.count-1)),this.cancelScrollToIndex(),"smooth"===a&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");e=this.getOffsetForIndex(r,e);if(e){let[t,i]=e;this._scrollToOffset(t,{adjustments:void 0,behavior:a}),"smooth"!==a&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{var t,e;this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(r))?(t=this.getOffsetForIndex(r,i))&&([t]=t,e=this.getScrollOffset(),Math.abs(t-e)<=1||this.scrollToIndex(r,{align:i,behavior:a})):this.scrollToIndex(r,{align:i,behavior:a})}))}},this.scrollBy=(t,{behavior:e}={})=>{this.cancelScrollToIndex(),"smooth"===e&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:e})},this.getTotalSize=()=>{var t,e=this.getMeasurements();let i;if(0===e.length)i=this.options.paddingStart;else if(1===this.options.lanes)i=(null==(t=e[e.length-1])?void 0:t.end)??0;else{var r=Array(this.options.lanes).fill(null);let t=e.length-1;for(;0<=t&&r.some(t=>null===t);){var a=e[t];null===r[a.lane]&&(r[a.lane]=a.end),t--}i=Math.max(...r.filter(t=>null!==t))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:e,behavior:i})=>{this.options.scrollToFn(t,{behavior:i,adjustments:e},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}},wt=(t,e,i,r)=>{for(;t<=e;){var a=(t+e)/2|0,n=i(a);if(n<r)t=1+a;else{if(!(r<n))return a;e=a-1}}return 0<t?t-1:0},St="undefined"!=typeof document?R.useLayoutEffect:R.useEffect,N=e(i()),xt=({item:t,onUntrash:e})=>{var i="type"in t&&"artist"===t.type,r=i?"rounded-full":"rounded",a=i?t.secondaryText:t.artist;return N.default.createElement("div",{className:"flex items-center justify-between rounded-md p-3 hover:bg-white/5"},N.default.createElement("div",{className:"flex min-w-0 flex-1 items-center gap-3"},t.imageUrl?N.default.createElement("img",{src:t.imageUrl,alt:t.name,className:`h-12 w-12 ${r} object-cover`}):N.default.createElement("div",{className:`flex h-12 w-12 items-center justify-center ${r} bg-white/10`},N.default.createElement(i?Pt:Lt,{className:"h-6 w-6 text-white/70"})),N.default.createElement("div",{className:"min-w-0 flex-1"},N.default.createElement("div",{className:"truncate font-medium text-white"},t.name),N.default.createElement("div",{className:"truncate text-sm text-white/60"},a))),N.default.createElement("button",{onClick:()=>e(t.uri),className:"ml-2 rounded-full p-2 hover:bg-red-500/20 hover:text-red-400",title:"Remove from trashbin"},N.default.createElement(Ht,{className:"h-5 w-5 text-white/70"})))},Et=({type:t})=>N.default.createElement("div",{className:"p-8 text-center"},N.default.createElement("div",{className:"flex flex-col items-center gap-6 py-12"},N.default.createElement(Dt,{className:"h-20 w-20 text-white/20"}),N.default.createElement("div",null,N.default.createElement("h3",{className:"mb-2 text-xl font-semibold text-white"},"No trashed ",t,"!"),N.default.createElement("p",{className:"text-white/60"},"songs"===t?"Songs":"Artists"," you add to the trashbin will appear here.")))),kt=({label:t,count:e,isActive:i,onClick:r})=>N.default.createElement("button",{onClick:r,className:jt("relative !px-4 !py-2 text-lg font-medium transition-colors","border-b-2 border-transparent",i?"!border-green-500 !text-white":"text-white/60 hover:text-white/80")},t,N.default.createElement("span",{className:"!mx-1 text-xs text-white/60"},"(",e,")"),i&&N.default.createElement("div",{className:"absolute right-0 bottom-0 left-0 h-0.5 bg-green-500"})),Tt=()=>{let{trashSongList:t,trashArtistList:e,toggleSongTrash:i,toggleArtistTrash:r}=w(),[a,n]=(0,N.useState)("songs"),[o,s]=(0,N.useState)(new Map([["songs",new Map],["artists",new Map]])),[l,c]=(0,N.useState)(new Set),d=(0,N.useRef)(null);var u=(0,N.useMemo)(()=>Object.keys(t),[t]),h=(0,N.useMemo)(()=>Object.keys(e),[e]),p=[{key:"songs",label:"Songs",count:u.length,uris:u},{key:"artists",label:"Artists",count:h.length,uris:h}];let f=p.find(t=>t.key===a),m=o.get(a)||new Map,g=Ft({count:f.uris.length,getScrollElement:()=>d.current,estimateSize:()=>60,overscan:10}),b=(0,N.useCallback)(async t=>{let e=a+"-"+t;if(!l.has(e)){let r=50*t;t=Math.min(50+r,f.uris.length);c(t=>new Set(t).add(e));try{var i=f.uris.slice(r,t);let e="songs"===a?await Wt(i):await Kt(i);s(t=>{t=new Map(t);let i=new Map(t.get(a));return e.forEach((t,e)=>i.set(r+e,t)),t.set(a,i),t})}catch(t){console.error(`Failed to load ${a} batch:`,t)}finally{c(t=>{t=new Set(t);return t.delete(e),t})}}},[a,f.uris,l]),v=((0,N.useEffect)(()=>{var t=g.getVirtualItems();let e=new Set;t.forEach(t=>{m.has(t.index)||e.add(Math.floor(t.index/50))}),e.forEach(b)},[g.getVirtualItems(),m,b]),(0,N.useEffect)(()=>{c(new Set)},[a]),(0,N.useEffect)(()=>{s(t=>{t=new Map(t);return t.set("songs",new Map),t})},[u]),(0,N.useEffect)(()=>{s(t=>{t=new Map(t);return t.set("artists",new Map),t})},[h]),(0,N.useCallback)(t=>{("songs"===a?i:r)(t,!1)},[a,i,r]));return 0<u.length||0<h.length?N.default.createElement(N.default.Fragment,null,N.default.createElement("style",null,".main-trackCreditsModal-mainSection {overflow-y: hidden !important;}"),N.default.createElement("div",{className:"!mb-4 flex border-b border-white/10"},p.map(t=>N.default.createElement(kt,{key:t.key,label:t.label,count:t.count,isActive:a===t.key,onClick:()=>n(t.key)}))),0===f.uris.length?N.default.createElement(Et,{type:a}):N.default.createElement(N.default.Fragment,null,N.default.createElement("div",{ref:d,className:"h-[400px] overflow-auto rounded-lg border border-white/10 bg-black/20"},N.default.createElement("div",{style:{height:g.getTotalSize(),position:"relative"}},g.getVirtualItems().map(t=>{var e=m.get(t.index);return N.default.createElement("div",{key:t.key,style:{position:"absolute",top:0,left:0,width:"100%",height:t.size,transform:`translateY(${t.start}px)`}},e?N.default.createElement(xt,{item:e,onUntrash:v}):N.default.createElement("div",{className:"flex h-full items-center justify-center"},N.default.createElement("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-white/20 border-t-white/60"})))}))),N.default.createElement("div",{className:"!py-4 text-center"},N.default.createElement("p",{className:"text-sm text-white/40"},m.size," of ",f.uris.length," ",a," loaded")))):N.default.createElement(Et,{type:a})},Ot=async function(){let t=document.createElement("div");return t.id="trashbin-plus-root",t.className="fixed top-0 left-0 z-50 pointer-events-none",document.body.appendChild(t),d.default.render(c.default.createElement(qt,null),t),console.log("Spicetify is ready! Attaching Trashbin+ React component.",Spicetify),()=>{d.default.unmountComponentAtNode(t),t.remove()}},(async()=>{await Ot()})(),(async()=>{var t;document.getElementById("trashbinDplus")||((t=document.createElement("style")).id="trashbinDplus",t.textContent=String.raw`
  @layer properties;@layer theme,base,components,utilities; @layer theme{:host,:root{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-400:oklch(70.4% 0.191 22.216);--color-red-500:oklch(63.7% 0.237 25.331);--color-green-500:oklch(72.3% 0.219 149.579);--color-black:#000;--color-white:#fff;--spacing:0.25rem;--text-xs:0.75rem;--text-xs--line-height:calc(1 / 0.75);--text-sm:0.875rem;--text-sm--line-height:calc(1.25 / 0.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75 / 1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75 / 1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2 / 1.5);--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--radius-md:0.375rem;--radius-lg:0.5rem;--animate-spin:spin 1s linear infinite;--blur-sm:8px;--default-transition-duration:150ms;--default-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,::after,::backdrop,::before,::file-selector-button{box-sizing:border-box;margin:0;padding:0;border:0 solid}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}menu,ol,ul{list-style:none}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}::file-selector-button,button,input,optgroup,select,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;border-radius:0;background-color:transparent;opacity:1}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not (-webkit-appearance:-apple-pay-button)) or (contain-intrinsic-size:1px){::placeholder{color:currentcolor}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-meridiem-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-year-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}::file-selector-button,button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}.visible{visibility:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.top-0{top:calc(var(--spacing) * 0)}.right-0{right:calc(var(--spacing) * 0)}.bottom-0{bottom:calc(var(--spacing) * 0)}.left-0{left:calc(var(--spacing) * 0)}.z-50{z-index:50}.container{width:100%}.\!my-2\.5{margin-block:calc(var(--spacing) * 2.5)!important}.\!mb-4{margin-bottom:calc(var(--spacing) * 4)!important}.mb-2{margin-bottom:calc(var(--spacing) * 2)}.mb-6{margin-bottom:calc(var(--spacing) * 6)}.\!ml-3{margin-left:calc(var(--spacing) * 3)!important}.ml-2{margin-left:calc(var(--spacing) * 2)}.\!flex{display:flex!important}.block{display:block}.contents{display:contents}.flex{display:flex}.hidden{display:none}.inline{display:inline}.table{display:table}.h-0\.5{height:calc(var(--spacing) * .5)}.h-5{height:calc(var(--spacing) * 5)}.h-6{height:calc(var(--spacing) * 6)}.h-12{height:calc(var(--spacing) * 12)}.h-20{height:calc(var(--spacing) * 20)}.h-\[400px\]{height:400px}.h-\[500px\]{height:500px}.h-full{height:100%}.\!min-h-8{min-height:calc(var(--spacing) * 8)!important}.w-5{width:calc(var(--spacing) * 5)}.w-6{width:calc(var(--spacing) * 6)}.w-12{width:calc(var(--spacing) * 12)}.w-20{width:calc(var(--spacing) * 20)}.w-full{width:100%}.min-w-0{min-width:calc(var(--spacing) * 0)}.flex-1{flex:1}.flex-shrink-0{flex-shrink:0}.transform{transform:var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,)}.animate-spin{animation:var(--animate-spin)}.\!cursor-pointer{cursor:pointer!important}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.\!items-center{align-items:center!important}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.\!gap-2\.5{gap:calc(var(--spacing) * 2.5)!important}.gap-3{gap:calc(var(--spacing) * 3)}.gap-6{gap:calc(var(--spacing) * 6)}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.overflow-auto{overflow:auto}.\!rounded-full{border-radius:calc(infinity * 1px)!important}.rounded{border-radius:.25rem}.rounded-full{border-radius:calc(infinity * 1px)}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.\!border{border-style:var(--tw-border-style)!important;border-width:1px!important}.\!border-0{border-style:var(--tw-border-style)!important;border-width:0!important}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-none{--tw-border-style:none;border-style:none}.\!border-\[\#727272\]{border-color:#727272!important}.\!border-green-500{border-color:var(--color-green-500)!important}.border-transparent{border-color:transparent}.border-white{border-color:var(--color-white)}.border-white\/10{border-color:color-mix(in srgb,#fff 10%,transparent)}.\!bg-transparent{background-color:transparent!important}.bg-black{background-color:var(--color-black)}.bg-black\/20{background-color:color-mix(in srgb,#000 20%,transparent)}.bg-transparent{background-color:transparent}.bg-white{background-color:var(--color-white)}.bg-white\/10{background-color:color-mix(in srgb,#fff 10%,transparent)}.\!p-2{padding:calc(var(--spacing) * 2)!important}.p-2{padding:calc(var(--spacing) * 2)}.p-3{padding:calc(var(--spacing) * 3)}.p-4{padding:calc(var(--spacing) * 4)}.p-6{padding:calc(var(--spacing) * 6)}.p-8{padding:calc(var(--spacing) * 8)}.\!px-4{padding-inline:calc(var(--spacing) * 4)!important}.\!px-\[15px\]{padding-inline:15px!important}.\!py-2{padding-block:calc(var(--spacing) * 2)!important}.\!py-2\.5{padding-block:calc(var(--spacing) * 2.5)!important}.\!py-4{padding-block:calc(var(--spacing) * 4)!important}.py-4{padding-block:calc(var(--spacing) * 4)}.py-12{padding-block:calc(var(--spacing) * 12)}.pr-4{padding-right:calc(var(--spacing) * 4)}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading, var(--text-2xl--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading, var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading, var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading, var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading, var(--text-xs--line-height))}.text-\[0\.5rem\]{font-size:.5rem}.\!font-bold{--tw-font-weight:var(--font-weight-bold)!important;font-weight:var(--font-weight-bold)!important}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.\!text-\[rgba\(var\(--spice-rgb-text\)\,0\.3\)\]{color:rgba(var(--spice-rgb-text),.3)!important}.\!text-\[var\(--spice-text\)\]{color:var(--spice-text)!important}.\!text-white{color:var(--color-white)!important}.text-\[var\(--spice-text\)\]{color:var(--spice-text)}.text-green-500{color:var(--color-green-500)}.text-red-500{color:var(--color-red-500)}.text-white{color:var(--color-white)}.text-white\/20{color:color-mix(in srgb,#fff 20%,transparent)}.uppercase{text-transform:uppercase}.opacity-70{opacity:70%}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,)}.\!transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to!important;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function))!important;transition-duration:var(--tw-duration, var(--default-transition-duration))!important}.\!transition-transform{transition-property:transform,translate,scale,rotate!important;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function))!important;transition-duration:var(--tw-duration, var(--default-transition-duration))!important}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration, var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration, var(--default-transition-duration))}.\!duration-\[33ms\]{--tw-duration:33ms!important;transition-duration:33ms!important}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@keyframes spin{to{transform:rotate(360deg)}}@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::after,::backdrop,::before{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-border-style:solid;--tw-font-weight:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial}}}/*! tailwindcss v4.1.9 | MIT License | https://tailwindcss.com */
      `.trim(),document.head.appendChild(t))})()})();